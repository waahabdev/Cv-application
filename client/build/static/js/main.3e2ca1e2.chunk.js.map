{"version":3,"sources":["components/Login.js","components/Dashboard.js","components/ProtectedRoutes.js","App.js","index.js"],"names":["Login","navigate","useNavigate","useState","email","setemail","password","setpassword","isAuthenticated","localStorage","getItem","handleChange","e","target","name","value","handleSubmit","a","preventDefault","axios","post","process","then","res","setItem","data","token","user","firstname","lastname","catch","err","console","log","className","onSubmit","htmlFor","type","id","onChange","Dashboard","history","onClick","clear","ProtectedRoutes","to","App","exact","path","element","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"kRAmGeA,EA/FD,WACZ,IAAIC,EAAWC,cAKf,EAA0BC,mBAAS,CACjCC,MAAO,KADT,mBAAOA,EAAP,KAAcC,EAAd,KAIA,EAAgCF,mBAAS,CACvCG,SAAU,KADZ,mBAAOA,EAAP,KAAiBC,EAAjB,KAIA,SAASC,IACP,OAAOC,aAAaC,QAAQ,SAG9B,IAAMC,EAAe,SAACC,GACpBP,EAAS,2BACJD,GADG,kBAELQ,EAAEC,OAAOC,KAAOF,EAAEC,OAAOE,SAE5BR,EAAY,2BACPD,GADM,kBAERM,EAAEC,OAAOC,KAAOF,EAAEC,OAAOE,UAIxBC,EAAY,uCAAG,WAAOJ,GAAP,SAAAK,EAAA,sDACnBL,EAAEM,iBAEFC,IACGC,KAAKC,oCAA2CjB,EAAOE,GACvDgB,MAAK,SAACC,GACLd,aAAae,QAAQ,QAASD,EAAIE,KAAKC,OACvCjB,aAAae,QAAQ,YAAaD,EAAIE,KAAKE,KAAKC,WAChDnB,aAAae,QAAQ,WAAYD,EAAIE,KAAKE,KAAKE,UAC/CpB,aAAae,QAAQ,OAAQD,EAAIE,KAAKE,MAElCnB,GACFP,EAAS,iBAGZ6B,OAAM,SAACC,GACNC,QAAQC,IAAIF,MAhBG,2CAAH,sDAoBlB,OACE,qBAAKG,UAAU,mEAAf,SACE,qBAAKA,UAAU,OAAf,SACE,sBAAKA,UAAU,OAAf,UACE,qBAAKA,UAAU,qCAAf,SACE,mBAAGA,UAAU,+BAEf,uBAAMC,SAAUnB,EAAhB,UACE,sBAAKkB,UAAU,OAAf,UACE,uBAAOE,QAAQ,qBAAqBF,UAAU,aAA9C,2BAGA,uBACEpB,KAAK,QACLuB,KAAK,QACLH,UAAU,eACVI,GAAG,qBACH,mBAAiB,YACjBC,SAAU5B,IAEZ,qBAAK2B,GAAG,YAAYJ,UAAU,YAA9B,+DAIF,sBAAKA,UAAU,OAAf,UACE,uBAAOE,QAAQ,wBAAwBF,UAAU,aAAjD,sBAGA,uBACEG,KAAK,WACLvB,KAAK,WACLoB,UAAU,eACVI,GAAG,wBACHC,SAAU5B,OAGd,wBAAQ0B,KAAK,SAASH,UAAU,kBAAhC,+B,QC9DGM,EAxBG,WAChB,IAAIC,EAAUvC,cAMd,OACE,qBAAKgC,UAAU,iBAAf,SACE,sBAAKA,UAAU,gCAAf,UACE,qBAAKA,UAAU,OAAf,SACE,sDAGF,8BACE,wBAAQA,UAAU,eAAeQ,QAbrB,WAClBjC,aAAakC,QACbF,EAAQ,MAWF,6BCVKG,EALS,WAGpB,MAAQ,UAAWnC,aAAgB,cAAC,IAAD,IAAa,cAAC,IAAD,CAAUoC,GAAG,YC+BlDC,MAtBf,WACE,OACE,qBAAKZ,UAAU,MAAf,SACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOa,OAAK,EAACC,KAAK,IAAIC,QAAS,cAAC,EAAD,MAC/B,cAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,aAAaC,QAAS,cAAC,EAAD,IAAxC,SAQE,cAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,aAAaC,QAAS,cAAC,EAAD,gBCvBpDC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.3e2ca1e2.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router\";\r\n\r\nconst Login = () => {\r\n  let navigate = useNavigate();\r\n\r\n  // Instead of making an object and then setting a string \r\n  // you could simply make a string like below\r\n  // const [email, setemail] = useState(\"\");\r\n  const [email, setemail] = useState({\r\n    email: \"\",\r\n  })\r\n  // Same goes here\r\n  const [password, setpassword] = useState({\r\n    password: \"\",\r\n  });\r\n\r\n  function isAuthenticated() {\r\n    return localStorage.getItem(\"token\");\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    setemail({\r\n      ...email,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n    setpassword({\r\n      ...password,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    // Instead of making axios request direct from the component we should create a service called authService and deal all of these things there.\r\n    axios\r\n      .post(process.env.REACT_APP_URL + \"users/login\", email, password)\r\n      .then((res) => {\r\n        localStorage.setItem(\"token\", res.data.token);\r\n        localStorage.setItem(\"firstname\", res.data.user.firstname); //Why do we need to save firstname lastname separately? Can't we get it from user data we're setting in the localStorage\r\n        localStorage.setItem(\"lastname\", res.data.user.lastname);\r\n        localStorage.setItem(\"user\", res.data.user);\r\n\r\n        if (isAuthenticated) {\r\n          navigate(\"/dashboard\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"login align-items-center d-flex justify-content-center container\">\r\n      <div className=\"card\">\r\n        <div className=\"m-5 \">\r\n          <div className=\"d-flex justify-content-center mb-3\">\r\n            <i className=\"login-person far fa-user\"></i>\r\n          </div>\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">\r\n                Email address\r\n              </label>\r\n              <input\r\n                name=\"email\"\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                id=\"exampleInputEmail1\"\r\n                aria-describedby=\"emailHelp\"\r\n                onChange={handleChange}\r\n              />\r\n              <div id=\"emailHelp\" className=\"form-text\">\r\n                We'll never share your email with anyone else.\r\n              </div>\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">\r\n                Password\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                className=\"form-control\"\r\n                id=\"exampleInputPassword1\"\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-primary\">\r\n              Submit\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\n\r\nconst Dashboard = () => {\r\n  let history = useNavigate();\r\n  const removeToken = () => { //Instead of \"removeToken\" the function name should be relevant to it action like \"logout\" or \"onLogout\"\r\n    localStorage.clear();\r\n    history(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className=\"d-flex justify-content-around\">\r\n        <div className=\"card\">\r\n          <h1>You are logged in!</h1>\r\n        </div>\r\n\r\n        <div>\r\n          <button className=\"btn btn-info\" onClick={removeToken}>\r\n            Log out\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import React from 'react';\r\nimport { Navigate, Outlet } from 'react-router-dom';\r\n\r\nconst ProtectedRoutes = () => {\r\n    // If authorized, return an outlet that will render child elements\r\n    // If not, return element that will navigate to login page\r\n    return ('token' in localStorage) ? <Outlet /> : <Navigate to=\"/login\" />;\r\n}\r\nexport default ProtectedRoutes\r\n\r\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport Login from \"./components/Login\";\r\nimport { Routes, Route, BrowserRouter } from \"react-router-dom\";\r\nimport Dashboard from \"./components/Dashboard\";\r\nimport ProtectedRoutes from \"./components/ProtectedRoutes\";\r\n\r\n// function ProtectedRoute({ component, path, exact }) {\r\n//   if (token) {\r\n//     return <Route path={path} component={component} exact={exact} />;\r\n//   } else {\r\n//     return <Route component={PageLogin} />;\r\n//   }\r\n// }\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <BrowserRouter>\r\n        <Routes>\r\n          <Route exact path=\"/\" element={<Login />} />\r\n          <Route exact path=\"/dashboard\" element={<ProtectedRoutes />}> \r\n          {/* Instead of making a child route in protectedROutes we can simply use the above function like\r\n               <ProtectedRoute\r\n                  path=\"/dashboard\"\r\n                  exact\r\n                  element={<Dashboard />}\r\n                />\r\n          */}\r\n            <Route exact path=\"/dashboard\" element={<Dashboard />} />\r\n          </Route>\r\n        </Routes>\r\n      </BrowserRouter>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n"],"sourceRoot":""}